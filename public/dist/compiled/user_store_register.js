"use strict";function _toConsumableArray(e){return _arrayWithoutHoles(e)||_iterableToArray(e)||_unsupportedIterableToArray(e)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(e,a){if(e){if("string"==typeof e)return _arrayLikeToArray(e,a);var t=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(t="Object"===t&&e.constructor?e.constructor.name:t)||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?_arrayLikeToArray(e,a):void 0}}function _iterableToArray(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function _arrayWithoutHoles(e){if(Array.isArray(e))return _arrayLikeToArray(e)}function _arrayLikeToArray(e,a){(null==a||a>e.length)&&(a=e.length);for(var t=0,n=new Array(a);t<a;t++)n[t]=e[t];return n}var tncMerchantRead=!1,tncPernyataanRead=!1,tncKerjasamaRead=!1,inputDistrictClicked=!1;function getSubdistrict(){var e=$("#input-city").val();$("#input-district").val(""),$.get(BASE_URL+"/user/store/subdistrict/"+e).done(function(e){0<e.length&&($("#kecamatan_lists").empty(),_toConsumableArray(e).forEach(function(e){e=e.subdistrict_name;$("#kecamatan_lists").append($("<option>",{value:e,text:e}))})),elementLoading.hide()}).fail(function(e){elementLoading.hide(),showGeneralPopup("Pilihan Kabupaten tidak valid")})}$(function(){$("#input-post-code, #no_npwp, #nama_npwp, #nik, #nomor_rekening, #total_manpower, #modal_usaha, #user-post-code, #user-phone-number").on("input",function(){$(this).val($(this).val().replace(/[^0-9]/g,""))})}),$("#input-city").on("change",function(){elementLoading.show(),getSubdistrict()}),!1===inputDistrictClicked&&""!==$("#input-city").val()&&""===$("#input-district").val()&&1===completeForm&&(getSubdistrict(),inputDistrictClicked=!0);var elSelectCriteria=$("#kriteria_usaha"),elDeskripsiCriteria=$("#deskripsi_kriteria"),tabSyaratKetentuan=$("#tabTnc"),tabDataUsaha=$("#tabDataUsaha"),tabToko=$("#tabDataToko"),tabPemilikUsaha=$("#tabPemilikUsaha"),tabKeuangan=$("#tabKeuangan"),tabPajak=$("#tabPerpajakan"),tabKerjasama=$("#tabKerjasama"),tabSuratPernyataan=$("#tabSuratPernyataan"),tabPerjanjianKerjasama=$("#tabPerjanjianKerjasama"),tabStatus=$("#tabStatus"),tabContentTncMerchant=$("#tncMercant"),tabContentToko=$("#toko"),tabContentPemilik=$("#pemilikUsaha"),tabContentKeuangan=$("#keuangan"),tabContentPerpajakan=$("#perpajakan"),tabContentKerjasama=$("#kerjasama"),tabContentSuratPernyataan=$("#suratPernyataan"),tabContentPerjanjianKerjasama=$("#perjanjianKerjasama"),tabContentStatus=$("#statusMerchant"),tabContentFinish=$("#finish"),elementTncMerchant=$(".input-tnc-merchant"),elementsToko=$(".input-toko"),elementsTokoImg=$(".input-toko-img"),elementsTokoKurir=$(".input-toko-kurir"),elementProductCategory=$(".input-toko-product-category"),elementsPemilikUsaha=$(".input-pemilik"),elementsPemilikUsahaImg=$(".input-pemilik-img"),elementsKeuangan=$(".input-keuangan"),elementsKeuanganImg=$(".input-keuangan-img"),elementsPajak=$(".input-pajak"),elementPajakImg=$(".input-pajak-img"),elementPernyataan=$(".input-surat-pernyataan"),elementKerjasama=$(".input-perjanjian-kerjasama");function maskCurencyToInteger(){var a=document.getElementById("modal_usaha_input").value;console.log("Masked value: ",a);var t=a.split("Rp. ")[a.split("Rp. ").length-1];console.log("Unmask RP: ",t);a="";try{a=t.split(".").join("")}catch(e){a=t}console.log("Unmasked Value: ",a),document.getElementById("modal_usaha").value=a}elSelectCriteria.on("change",function(){var e=$("option:selected",this).attr("value");options[e]?(e=options[e].description,elDeskripsiCriteria.text("( ".concat(e," )"))):elDeskripsiCriteria.text("")}),$("#no_npwp").inputmask({mask:"99.999.999.9-999.999",placeholder:" ",showMaskOnHover:!1,showMaskOnFocus:!1,onBeforePaste:function(e,a){return e}}),$("#modal_usaha_input").inputmask("integer",{radixPoint:",",groupSeparator:".",digits:0,autoGroup:!0,prefix:"Rp. ",rightAlign:!1});for(var checkbox=document.querySelectorAll(".input-toko-kurir"),i=0;i<checkbox.length;i++)checkbox[i].addEventListener("change",function(){this.checked?this.setAttribute("checked",!0):this.setAttribute("checked",!1)});for(var checkboxCategories=document.querySelectorAll(".input-toko-product-category"),i=0;i<checkboxCategories.length;i++)checkboxCategories[i].addEventListener("change",function(){this.checked?this.setAttribute("checked",!0):this.setAttribute("checked",!1)});var checkbox_tnc_merchant=document.querySelector("input[name=user_tnc]");checkbox_tnc_merchant.addEventListener("change",function(){return tncMerchantRead?void(this.checked?$(this).val("yes"):$(this).val("no")):(this.checked=!1,showGeneralPopup("Mohon untuk membaca Syarat dan Ketentuan Umum Merchant"))});var checkbox_kerjasama=document.querySelector("input[name=tnc_perjanjian_kerjasama]");checkbox_kerjasama.addEventListener("change",function(){return tncKerjasamaRead?void(this.checked?$(this).val("yes"):$(this).val("no")):(this.checked=!1,showGeneralPopup("Mohon untuk membaca Perjanjian Kerjasama"))});var checkbox_kesepakatan=document.querySelector("input[name=tnc_surat_pernyataan]");function backToTab(e){document.getElementById(e).click(),window.scrollTo(0,0)}checkbox_kesepakatan.addEventListener("change",function(){return tncPernyataanRead?void(this.checked?$(this).val("yes"):$(this).val("no")):(this.checked=!1,showGeneralPopup("Mohon untuk membaca Surat Pernyataan"))}),document.getElementById("tnc-merchant-file").addEventListener("scroll",function(){var e=this.scrollHeight-this.scrollTop-this.clientHeight;(e<=90||e<600)&&(tncMerchantRead=!0)}),document.getElementById("tnc-pernyataan-file").addEventListener("scroll",function(){this.scrollHeight-this.scrollTop-this.clientHeight<=200&&(tncPernyataanRead=!0)}),document.getElementById("tnc-kesepakatan-file").addEventListener("scroll",function(){this.scrollHeight-this.scrollTop-this.clientHeight<=200&&(tncKerjasamaRead=!0)});var forms={1:{el:tabSyaratKetentuan,nextTab:"toko",submitted:!1},2:{el:tabToko,nextTab:"pemilikUsaha",submitted:!1},3:{el:tabPemilikUsaha,nextTab:"keuangan",submitted:!1},4:{el:tabKeuangan,nextTab:"perpajakan",submitted:!1},5:{el:tabPajak,nextTab:"kerjasama",submitted:!1},6:{el:tabSuratPernyataan,nextTab:"suratPernyataan",submitted:!1},7:{el:tabPerjanjianKerjasama,nextTab:"perjanjianKerjasama",submitted:!1}};function checkCompletedForm(){if(0<completeForm)for(var e=1;e<=completeForm;e++)forms[e]&&(forms[e].submitted=!0,forms[e].el.append('<i class="fas fa-check green"></i>'),forms[e].el.removeClass("disable-click"),1==e?forms[e].el.addClass("active"):e==completeForm&&completeForm<7&&forms[e+1].el.removeAttr("disabled"));"ACTIVE"!==statusMerchant&&"UPDATE"!==statusMerchant&&"PENDING"!==statusMerchant||($("#user_tnc").attr("disabled",!0),$("#tnc_surat_pernyataan").attr("disabled",!0),$("#tnc_perjanjian_kerjasama").attr("disabled",!0))}checkCompletedForm(),"PENDING"===statusMerchant&&(showGeneralPopup("Status merchant anda Pending. Mohon cek tab status untuk keterangan"),$("#tabSuratPernyataan, #tabPerjanjianKerjasama").each(function(e,a){$(a).hasClass("disable-click")||$(a).addClass("disable-click")}),$("#tabStatus").trigger("click"),window.scrollTo(0,0));var prevFormValues=[],currentFormValues=[];function checkIsFormEdited(){var e=$(".input-toko, #input-file-logo, #brand, #input-file-img-dash, .input-toko-img, #file-input-siu, #file-input-dok, #description, .input-pemilik, .input-pemilik-img, .input-keuangan, .input-keuangan-img, .input-pajak, .input-pajak-img, #tnc_surat_pernyataan, #tnc_perjanjian_kerjasama, #user_tnc, #user-phone-number, #user-email, .input-toko-product-category");return 0===prevFormValues.length?e.each(function(e,a){$(a).is(":checkbox")?prevFormValues.push({index:e,value:$(a).prop("checked")}):prevFormValues.push({index:e,value:$(a).val()})}):(currentFormValues=[],e.each(function(e,a){$(a).is(":checkbox")?currentFormValues.push({index:e,value:$(a).prop("checked")}):currentFormValues.push({index:e,value:$(a).val()})})),0<prevFormValues.length&&0<currentFormValues.length&&!prevFormValues.every(function(e,a){return e.value===currentFormValues[a].value})&&showConfirmPopup("Simpan perubahan ?"),!1}function myTabs(e,a,t){e.preventDefault();for(var n,i,r,o,s,l,c,d="submit"===t,e=$("#status"),u=document.getElementsByClassName("tabcontent"),m=document.getElementsByClassName("tablinks"),p=0;p<u.length;p++)u[p].style.display="none";for(p=0;p<m.length;p++)$(m[p]).removeClass("active");for(p=1;p<=5;p++)forms[p].nextTab===a&&!0===forms[p].submitted&&(d=!1);"tnc"===a?(tabSyaratKetentuan.addClass("active"),tabContentTncMerchant.css("display","block"),tabDataUsaha.removeAttr("disabled"),tabToko.removeAttr("disabled")):"dataUsaha"===a||"toko"===a?(tabToko.removeAttr("disabled"),!0===$("#user_tnc").prop("checked")?(document.getElementById("tabTnc").innerHTML='<i class="fas fa-check green"></i> Syarat & Ketentuan Merchant',d||checkIsFormEdited()?(elementLoading.show(),registrationForm.submit()):(tabToko.addClass("active"),tabToko.removeClass("disable-click"),tabContentToko.css("display","block"),tabPemilikUsaha.removeAttr("disabled"))):(showValidationErrors([$("#user_tnc")]),tabContentTncMerchant.css("display","block"),tabSyaratKetentuan.addClass("active"),tabSyaratKetentuan.remove("i"),showGeneralPopup("Mohon lengkapi form syarat & ketentuan merchant!"))):"pemilikUsaha"===a?(tabPemilikUsaha.removeAttr("disabled"),t=_toConsumableArray(elementsToko).every(function(e){return""!==$(e).val()}),n=_toConsumableArray(elementsTokoImg).every(function(e){return""!==$(e).val()&&"[]"!==$(e).val()||1===$(e).data("initial")}),r=_toConsumableArray(elementsTokoKurir).some(function(e){return!0===$(e).prop("checked")}),i=_toConsumableArray(elementProductCategory).some(function(e){return!0===$(e).prop("checked")}),t&&n&&r&&i?(document.getElementById("tabDataToko").innerHTML='<i class="fas fa-check green"></i> Data Toko',d||checkIsFormEdited()?(elementLoading.show(),registrationForm.submit()):(tabContentPemilik.css("display","block"),tabPemilikUsaha.addClass("active"),tabPemilikUsaha.removeClass("disable-click"),tabKeuangan.removeAttr("disabled"),window.scrollTo(0,0))):(showValidationErrors([].concat(_toConsumableArray(elementsToko),_toConsumableArray(elementsTokoImg),_toConsumableArray(elementsTokoKurir),_toConsumableArray(elementProductCategory)),r),tabContentToko.css("display","block"),tabToko.addClass("active"),tabToko.remove("i"),showGeneralPopup("Mohon lengkapi form data toko!"))):"keuangan"===a?(tabKeuangan.removeAttr("disabled"),n=_toConsumableArray(elementsPemilikUsaha).every(function(e){return""!==$(e).val()}),i=_toConsumableArray(elementsPemilikUsahaImg).every(function(e){return""!==$(e).val()||1===$(e).data("initial")}),r=validateEmail($("#user-email").val()),o=validatePhoneNumber($("#user-phone-number").val()),n&&i&&r&&o?(document.getElementById("tabPemilikUsaha").innerHTML='<i class="fas fa-check green"></i> Data Pemilik Usaha',d||checkIsFormEdited()?(elementLoading.show(),registrationForm.submit()):(tabContentKeuangan.css("display","block"),tabKeuangan.addClass("active"),tabKeuangan.removeClass("disable-click"),tabPajak.removeAttr("disabled"),window.scrollTo(0,0))):(s=_toConsumableArray(elementsPemilikUsaha),i||s.push(elementsPemilikUsahaImg),r||s.push($("#user-email")),o||s.push($("#user-phone-number")),showValidationErrors(s),tabContentPemilik.css("display","block"),tabPemilikUsaha.addClass("active"),tabPemilikUsaha.remove("i"),showGeneralPopup("Mohon lengkapi form data pemilik usaha!"))):"perpajakan"===a?(tabPajak.removeAttr("disabled"),o=_toConsumableArray(elementsKeuangan).every(function(e){return""!==$(e).val()}),s=_toConsumableArray(elementsKeuanganImg).every(function(e){return""!==$(e).val()||1===$(e).data("initial")}),o&&s?(document.getElementById("tabKeuangan").innerHTML='<i class="fas fa-check green"></i> Data Keuangan',d||checkIsFormEdited()?(elementLoading.show(),registrationForm.submit()):(tabContentPerpajakan.css("display","block"),tabPajak.addClass("active"),tabPajak.removeClass("disable-click"),tabSuratPernyataan.removeAttr("disabled"),tabKerjasama.removeAttr("disabled"),window.scrollTo(0,0))):(showValidationErrors([].concat(_toConsumableArray(elementsKeuangan),_toConsumableArray(elementsKeuanganImg))),tabContentKeuangan.css("display","block"),tabKeuangan.addClass("active"),showGeneralPopup("Mohon lengkapi form data keuangan!"))):"kerjasama"===a?(tabKerjasama.removeAttr("disabled"),tabSuratPernyataan.removeAttr("disabled"),l=_toConsumableArray(elementsPajak).every(function(e){return""!==$(e).val()}),c=_toConsumableArray(elementPajakImg).every(function(e){return""!==$(e).val()||1===$(e).data("initial")}),l&&c?(document.getElementById("tabPerpajakan").innerHTML='<i class="fas fa-check green"></i> Data Perpajakan',d&&isDraft||"ACTIVE_UPDATE"===statusMerchant||checkIsFormEdited()?("ACTIVE_UPDATE"===statusMerchant?e.val("ACTIVE_UPDATE_COMPLETE"):e.val("COMPLETE"),elementLoading.show(),registrationForm.submit()):isPending?(tabContentPerpajakan.css("display","block"),tabPajak.addClass("active")):(tabContentSuratPernyataan.css("display","block"),tabSuratPernyataan.addClass("active"),tabSuratPernyataan.removeClass("disable-click"),tabPerjanjianKerjasama.removeAttr("disabled"),setElementKerjasama(),window.scrollTo(0,0))):(showValidationErrors([elementsPajak,elementPajakImg]),tabContentPerpajakan.css("display","block"),tabPajak.addClass("active"),showGeneralPopup("Mohon lengkapi form data perpajakan!"))):"suratPernyataan"===a?(tabSuratPernyataan.removeAttr("disabled"),l=_toConsumableArray(elementsPajak).every(function(e){return""!==$(e).val()}),c=_toConsumableArray(elementPajakImg).every(function(e){return""!==$(e).val()||1===$(e).data("initial")}),l&&c?(document.getElementById("tabPerpajakan").innerHTML='<i class="fas fa-check green"></i> Data Perpajakan',d&&isDraft||"ACTIVE_UPDATE"===statusMerchant||checkIsFormEdited()?("ACTIVE_UPDATE"===statusMerchant?e.val("ACTIVE_UPDATE_COMPLETE"):e.val("COMPLETE"),elementLoading.show(),registrationForm.submit()):isPending?(tabContentPerpajakan.css("display","block"),tabPajak.addClass("active")):(tabContentSuratPernyataan.css("display","block"),tabSuratPernyataan.addClass("active"),tabSuratPernyataan.removeClass("disable-click"),tabPerjanjianKerjasama.removeAttr("disabled"),setElementKerjasama(),window.scrollTo(0,0))):(showValidationErrors([elementsPajak,elementPajakImg]),tabContentPerpajakan.css("display","block"),tabPajak.addClass("active"),showGeneralPopup("Mohon lengkapi form data perpajakan!"))):"perjanjianKerjasama"===a?!0===$("#tnc_surat_pernyataan").prop("checked")?(document.getElementById("tabSuratPernyataan").innerHTML='<i class="fas fa-check green"></i> Surat Pernyataan',d||checkIsFormEdited()?(elementLoading.show(),registrationForm.submit()):(tabContentPerjanjianKerjasama.css("display","block"),tabPerjanjianKerjasama.addClass("active"),tabPerjanjianKerjasama.removeClass("disable-click"),tabStatus.removeAttr("disabled"),setElementKerjasama(),window.scrollTo(0,0))):(showValidationErrors([elementPernyataan]),tabContentSuratPernyataan.css("display","block"),tabSuratPernyataan.addClass("active"),showGeneralPopup("Mohon lengkapi form surat pernyataan!")):"status"===a?(tabStatus.removeAttr("disabled"),tabStatus.addClass("active"),tabContentStatus.css("display","block")):"finish"===a&&(!0===$("#tnc_perjanjian_kerjasama").prop("checked")?("VERIFIED"===statusMerchant&&e.val("ACTIVE"),elementLoading.show(),registrationForm.submit()):(tabContentPerjanjianKerjasama.css("display","block"),tabPerjanjianKerjasama.addClass("active"),window.scrollTo(0,0),showGeneralPopup("Mohon lengkapi form kerjasama!")))}checkIsFormEdited();var tabId,errorMsg='<p class="error error-validation">* tidak boleh kosong!</p>';function showValidationErrors(e,t){var n=!0;$(".error-validation").remove(),0<e.length&&e.forEach(function(e){var a=$(e),e=a.val();"user-email"===a.attr("id")?a.after('<p class="error error-validation">* email tidak valid!</p>'):"user-phone-number"===a.attr("id")?a.after('<p class="error error-validation">* no telepon tidak valid! (format: 08xxxxxxxxxx / 0xxxxx)</p>'):(""===e||" "===e||"[]"===e||0===e||"0"===e||a.is(":checkbox")&&!1===a.prop("checked")&&!t)&&(a.is("select")?a.parent().parent().append(errorMsg):a.is(":checkbox")?(n&&a.parent().append(errorMsg),n=!1):a.after(errorMsg))})}function validateEmail(e){console.log({email:e});if(!e)return!1;var a=e.split("@");if(2!==a.length)return!1;var t=a[0],a=a[1];return!(64<t.length)&&(!(255<a.length)&&(!a.split(".").some(function(e){return 63<e.length})&&!!/^[-!#$%&'*+\/0-9=?A-Z^_a-z`{|}~](\.?[-!#$%&'*+\/0-9=?A-Z^_a-z`{|}~])*@[a-zA-Z0-9](-*\.?[a-zA-Z0-9])*\.[a-zA-Z](-?[a-zA-Z0-9])+$/.test(e)))}function validatePhoneNumber(e){return/^(^0|^08)(\d{4,5}){2}$/g.test(e)}function setElementKerjasama(){var t=$("#merchant_name").val(),n=$("#full_name").val(),i=$("#nik").val(),r=$("#address").val(),o=$("#position option:selected").text(),e=$("#input-city-name").val(),a=$(".namaMerchant"),s=$(".namaPemilik"),l=$(".nikPemilik"),c=$(".alamatPemilik"),d=$(".jabatanPemilik"),u=$("#pernyataan-city");s.each(function(e,a){return $(a).text(" ".concat(n))}),l.each(function(e,a){return $(a).text(" ".concat(i))}),a.each(function(e,a){return $(a).html(t)}),c.each(function(e,a){return $(a).html(r)}),d.each(function(e,a){return $(a).html(o)}),u.text(e)}isPending?document.getElementById("tabStatus").click():!(0<completeForm)||7===completeForm?document.getElementById("tabTnc").click():(tabId=forms[completeForm+1].el.attr("id"),document.getElementById(tabId).click());var url=BASE_URL+"/media/file/upload",elementUserDirSlug=$("#user-dir-slug"),dir=elementUserDirSlug.length?"temp/users/"+elementUserDirSlug.val():"temp/users",overwrite=!1;$(document).ready(function(){var e=$(".dz-logo-uploader"),a=$(".dz-dash-uploader"),t=$(".dz-npwp-uploader"),n=$(".dz-siu-uploader"),i=$(".dz-dok-uploader"),r=$(".dz-ktp-uploader"),o=$(".dz-ttd-uploader"),s=$(".dz-cap-uploader"),l=$(".dz-rek-uploader"),c=$(".dz-sppkp-uploader"),d=$("#input-file-logo"),u=$("#input-file-img-dash"),m=$("#input-file-npwp"),p=$("#file-input-siu"),h=$("#file-input-dok"),k=$("#input-file-ktp"),b=$("#input-file-ttd"),g=$("#input-file-cap"),v=$("#file-input-rekening"),f=$("#file-input-sppkp"),y=$(".remove-sppkp"),P=$("#file-input-sppkp-temp"),C=$(".remove-siu"),j=$("#file-input-siu-temp"),w=$(".remove-dok"),_=$("#file-input-dok-temp"),E=$(".edit-siu"),T=$(".edit-dok"),A=$(".edit-sppkp");E.hide(),T.hide(),A.hide(),C.hide(),w.hide(),y.hide();var S=!1,I=null,L=!1;[{el:e,src:d,clickable:".file-input-logo",preview:"#previewImg-logo",multiple:!1,editable:!0,ratio:1,filetype:"image/*"},{el:a,src:u,clickable:".file-input-dash",preview:"#previewImg-dash",multiple:!1,editable:!0,ratio:4,filetype:"image/*"},{el:t,src:m,clickable:".file-input-npwp",preview:"#previewImg-npwp",multiple:!1},{el:r,src:k,clickable:".file-input-ktp",preview:"#previewImg-ktp",multiple:!1},{el:o,src:b,clickable:".file-input-ttd",preview:"#previewImg-ttd",multiple:!1},{el:s,src:g,clickable:".file-input-cap",preview:"#previewImg-cap",multiple:!1},{el:l,src:v,clickable:".file-input-rekening",preview:"#previewImg-rek",multiple:!1},{el:c,src:f,clickable:".file-input-sppkp",preview:"#previewImg-sppkp",multiple:!0,tempImage:P,delButton:y,editButton:".edit-sppkp",editButtonOnUpdateSelector:".edit-sppkp-on-edit"},{el:n,src:p,clickable:".file-input-siu",preview:"#previewImg-siu",multiple:!0,tempImage:j,delButton:C,editButton:".edit-siu",editButtonOnUpdateSelector:".edit-siu-on-edit"},{el:i,src:h,clickable:".file-input-dok",preview:"#previewImg-dok",multiple:!0,tempImage:_,delButton:w,editButton:".edit-dok",editButtonOnUpdateSelector:".edit-dok-on-edit"}].forEach(function(e){var o=e.el,s=e.src,a=e.clickable,l=e.preview,c=e.multiple,t=e.filetype,d=e.tempImage,n=e.editable,u=void 0!==n&&n,m=e.ratio,p=e.editButton,h=e.delButton,e=e.editButtonOnUpdateSelector,k=void 0===e?null:e;o.dropzone({url:url,clickable:a,createImageThumbnails:l,paramName:"file_image",maxFilesize:dzMaxSize,resizeWidth:720,acceptedFiles:void 0===t?"image/*,application/pdf":t,dictDefaultMessage:"",dictFallbackMessage:"",accept:function(e,a){this.options.paramName="file_image",e.type.includes("pdf")&&(this.options.paramName="file_file"),a()},params:function(e){var a="image";return e[0].type.includes("pdf")&&(a="file"),$.extend(!0,{type:a,dir:dir,overwrite:overwrite},TOKEN)},transformFile:function(t,n){var i,e,a,r,o,s;u?(i=this,(e=document.createElement("div")).className+=" wrapper-editor",(a=document.createElement("div")).className+=" editor",e.appendChild(a),document.body.appendChild(e),o=document.createElement("button"),r=document.createElement("button"),o.textContent="Confirm",o.className+="sBtn red upBtn right",r.textContent="Close",r.className+="sBtn red upBtn left",a.appendChild(o),a.appendChild(r),r.addEventListener("click",function(){document.body.removeChild(e)}),o.addEventListener("click",function(){elementLoading.show(),s.getCroppedCanvas({width:1e3,height:1e3}).toBlob(function(a){i.createThumbnail(a,i.options.thumbnailWidth,i.options.thumbnailHeight,i.options.thumbnailMethod,!1,function(e){i.emit("thumbnail",t,e),n(a)})}),document.body.removeChild(e)}),elementLoading.show(),(o=new Image).src=URL.createObjectURL(t),a.appendChild(o),s=new Cropper(o,{aspectRatio:m,viewMode:2,ready:function(){a.style.visibility="visible",elementLoading.hide()}})):n(t)},renameFile:function(e){var a=e.name.split("."),e=randomString(5);return a[0]+"-"+e+"."+a.pop()},previewTemplate:dzPreviewTemplate,init:function(){this.on("error",function(e,a,t){void 0===t?showGeneralPopup(a):413===t.status?showGeneralPopup(MSG_MAX_SIZE):403===t.status?showGeneralPopup(MSG_CSRF):showGeneralPopup(MSG_ERROR_500),elementLoading.hide()}),this.on("addedfile",function(e){u||elementLoading.show(),$(".dz-preview").remove()})},success:function(e){var t,a,n,i=JSON.parse(e.xhr.response),r=(e.type.includes("pdf")?i.file_file:i.file_image)[0];void 0!==r.error?showGeneralPopup(r.error):(i=decodeURIComponent(r.url),r=new URL(i),t=e.upload.uuid,i=e.type.includes("pdf")?BASE_URL+"/assets/img/pdf-logo.png":BASE_URL+r.pathname,c?"[]"===s.val()?($(l).siblings("a").each(function(e,a){$(a).attr("data-index",t).show()}),$(l).attr("src",i),$(l).parent("div").hasClass("hide")&&$(l).parent("div").removeClass("hide")):S?(e=_toConsumableArray($(p)).find(function(e){return $(e).attr("data-index")===I}),L&&(e=_toConsumableArray($(k)).find(function(e){return $(e).attr("data-index")===I})),e=$(e).parent(),$(e).children("a").attr("data-index",t).show(),$(e).children("img").attr("src",i)):((n=$(l).parent().clone(!0)).hasClass("hide")&&n.removeClass("hide"),$(n).children("a").attr("data-index",t).show(),$(n).children("img").attr("src",i),o.prepend(n)):$(l).attr("src",i),c?"[]"===s.val()?(s.val(JSON.stringify([r.pathname])),d.val(JSON.stringify([{path:r.pathname,uuid:t}]))):(n=[].concat(_toConsumableArray(JSON.parse(s.val())),[r.pathname]),i=[].concat(_toConsumableArray(JSON.parse(d.val())),[{path:r.pathname,uuid:t}]),S&&(a=i.find(function(e){return e.uuid===I}).path,n=n.filter(function(e){return e!==a}),i=i.filter(function(e){return e.uuid!==I})),console.log({dataImages:n}),console.log({tempImages:i}),s.val(JSON.stringify(n)),d.val(JSON.stringify(i))):s.val(r.pathname),p&&$(p).show(),h&&h.show()),I=null,L=S=!1,elementLoading.hide()}})}),E.on("click",function(){S=!0,I=$(this).attr("data-index"),$(".file-input-siu").trigger("click")}),T.on("click",function(){S=!0,I=$(this).attr("data-index"),$(".file-input-dok").trigger("click")}),A.on("click",function(){S=!0,I=$(this).attr("data-index"),$(".file-input-sppkp").trigger("click")}),C.on("click",function(){x($(this),p,j)}),w.on("click",function(){x($(this),h,_)}),y.on("click",function(){x($(this),f,P)});var x=function(t,n,i){var e=3<arguments.length&&void 0!==arguments[3]&&arguments[3],a=4<arguments.length&&void 0!==arguments[4]?arguments[4]:null;elementLoading.show();var r,o,s=JSON.parse(i.val()),l=t.attr("data-index"),c=s.find(function(e){return e.uuid===l}).path;c?(r={id:0,path:c,src:"photo_profile"},e?(""===a.val()?a.val(JSON.stringify([c])):(o=JSON.parse(a.val()),o=[].concat(_toConsumableArray(o),[c]),a.val(JSON.stringify(o))),console.log({deletedFiles:a.val()}),a=(o=s.filter(function(e){return e.uuid!==l})).map(function(e){return e.path}),console.log({newDataTemp:o,newDataImages:a}),n.val(JSON.stringify(a)),i.val(JSON.stringify(o)),0!==a.length||e?t.parent("div").remove():(t.siblings("img").attr("src","{{ imgThumbnail }}"),t.siblings("a").removeAttr("data-index"),t.siblings("a").hide(),t.removeAttr("data-index"),t.hide(),t.parent().addClass("hide")),elementLoading.hide()):$.post(dzDeleteUrl,$.extend(!0,r,TOKEN),function(e){var a;e.deleted?(e=(a=s.filter(function(e){return e.uuid!==l})).map(function(e){return e.path}),console.log({newDataTemp:a,newDataImages:e}),n.val(JSON.stringify(e)),i.val(JSON.stringify(a)),0===e.length?(t.siblings("img").attr("src","{{ imgThumbnail }}"),t.siblings("a").removeAttr("data-index"),t.siblings("a").hide(),t.removeAttr("data-index"),t.hide(),t.parent().addClass("hide")):t.parent("div").remove(),elementLoading.hide()):(elementLoading.hide(),showGeneralPopup("Terjadi kesalahan pada sistem"))})):(elementLoading.hide(),showGeneralPopup("Terjadi kesalahan pada sistem"))};$(".remove-siu-on-edit").on("click",function(){var e=$(this),a=$("#file-input-siu-temp"),t=$("#file-input-siu");x(e,t,a,!0,$("#deleted-siu-files"))}),$(".edit-siu-on-edit").on("click",function(){L=S=!0,I=$(this).attr("data-index"),$(".file-input-siu").trigger("click")}),$(".remove-dok-on-edit").on("click",function(){var e=$(this),a=$("#file-input-dok-temp"),t=$("#file-input-dok");x(e,t,a,!0,$("#deleted-doc-files"))}),$(".edit-dok-on-edit").on("click",function(){L=S=!0,I=$(this).attr("data-index"),$(".file-input-dok").trigger("click")}),$(".remove-sppkp-on-edit").on("click",function(){var e=$(this),a=$("#file-input-sppkp-temp"),t=$("#file-input-sppkp");x(e,t,a,!0,$("#deleted-sppkp-files"))}),$(".edit-sppkp-on-edit").on("click",function(){L=S=!0,I=$(this).attr("data-index"),$(".file-input-sppkp").trigger("click")})});var elPkp=document.getElementById("pkp");function showDiv(e){e.value,$("#sppkp_div").attr("style","display:block;")}showDiv(elPkp);var jenisUsaha=document.getElementById("jenis_usaha");function rekeningOnChange(e){"PERSEORANGAN"===e.value?(document.getElementById("pemilikusaha").style.display="block",document.getElementById("perusahaan").style.display="none",document.getElementById("label-npwp").innerHTML='<label for="">No NPWP Pemilik Usaha <span>*</span></label>'):"BADAN_USAHA"===e.value?(document.getElementById("perusahaan").style.display="block",document.getElementById("pemilikusaha").style.display="none",document.getElementById("label-npwp").innerHTML='<label for="">No NPWP Badan Usaha <span>*</span></label>'):(document.getElementById("pemilikusaha").style.display="none",document.getElementById("perusahaan").style.display="none")}rekeningOnChange(jenisUsaha),$("#store-province").on("change",function(){var e=$("option:selected",this).text();$("#input-province-name").val(e)});var latLng,mymap,marker,addressLat=$("#lat"),addressLng=$("#lng"),isAddressLatLngEmpty=""===addressLat.val()&&""===addressLng.val(),popup=L.popup();isAddressLatLngEmpty?(mymap=L.map("addressMap").setView([-8.6725072,115.1542332],10)).invalidateSize(!0):(latLng=[addressLat.val(),addressLng.val()],mymap=L.map("addressMap").setView(latLng,10),marker=L.marker(latLng,{icon:iconLoc}).addTo(mymap),popup.setLatLng(latLng).setContent("Alamat anda").openOn(mymap),mymap.invalidateSize(!0)),L.tileLayer("https://api.mapbox.com/styles/v1/{id}/tiles/{z}/{x}/{y}?access_token={accessToken}",{attribution:'Map data &copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors, Imagery Â© <a href="https://www.mapbox.com/">Mapbox</a>',maxZoom:18,id:"mapbox/streets-v11",tileSize:512,zoomOffset:-1,accessToken:LEAFLET_ACCESS_TOKEN}).addTo(mymap),mymap.on("click",function(e){mymap.invalidateSize(!0),addressLat.val(e.latlng.lat),addressLng.val(e.latlng.lng),marker=(marker&&mymap.removeLayer(marker),L.marker([e.latlng.lat,e.latlng.lng],{icon:iconLoc}).addTo(mymap)),popup.setLatLng(e.latlng).setContent("Alamat anda").openOn(mymap)});